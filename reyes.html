<!DOCTYPE html>
<html>
	<head>
		<link rel="manifest" href="./manifest.json" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>reyes</title>
	</head>
	<body>
		<link type="text/css" rel="stylesheet" href="reyes.css">
		<img src="cross.svg" id="cross">
		<script type="module" src="./face-api.js/dist/face-api.js"></script>
		<script type="module" src="./reyes.js"></script>


		<dialog id="setting">
			<p>
			<h2>Settings</h2>
			<fieldset>
				<legend>Choose FOV input type</legend>
				<input type="radio" id="fov" name="fov_method" value="fov" checked />
				<label for="fov">FOV (rad)</label>		
				<br>
				<input type="number" id="fov_input" />
				<label for="fov_input">FOV (rad)</label>	
				<hr>

				<input type="radio" id="dfov" name="fov_method" value="dfov" />
				<label for="dfov">FOV (deg)</label>	
				<br>
				<input type="number" id="dfov_input" />
				<label for="dfov_input">FOV (degree)</label>	
				<hr>

				<input type="radio" id="calc" name="fov_method" value="calc" />
				<label for="calc">Calculate by focal length (mm) and sensor diagonal length (mm)</label>
				<br>
				<input type="number" id="f_input" />
				<label for="f_input">Focal length (mm)</label>	
				<br>
				<input type="number" id="size_input" />
				<label for="size_input">Sensor diagonal length (mm)</label>

			</fieldset>

			<hr>
			<div>
				<button id="apply" name="but">Apply</button>
				<hr>
				<form method="dialog" name="but">
					<button>Close</button>
				</form>


			</div>


			</p>

		</dialog>

		<dialog id="load">
			<h2>Loading</h2>
		</dialog>


	</body>
	<script>
		if ("serviceWorker" in navigator) {
			navigator.serviceWorker.register("./sw.js").then(
				(registration) => {
					console.log("Service worker registration successful:", registration);
					registration.addEventListener("updatefound", () =>{
						console.warn("New sw available");
						registration.update();
					});
				},
				(error) => {
					console.error(`Service worker registration failed: ${error}`);
				},
			);
		} else {
			console.error("Service workers are not supported.");
		}
	</script>	


</html>
